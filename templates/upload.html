<!DOCTYPE html>
<html>
<head>
    <title>Upload Product</title>
</head>
<body>

<h2>Upload New Product</h2>

<form method="POST" enctype="multipart/form-data">

    <label>Select Category:</label>
    <select name="category_select" id="category_select" required>
        {% for cat in categories %}
            <option value="{{ cat }}">{{ cat.title() }}</option>
        {% endfor %}
        <option value="new">+ Create New Category</option>
    </select>

    <br><br>

    <div id="new_category_field" style="display:none;">
        <label>New Category Name:</label>
        <input type="text" name="new_category">
        <br><br>
    </div>

    <label>Product Code:</label>
    <input type="text" name="code" required>
    <br><br>

    <label>Title:</label>
    <input type="text" name="title" required>
    <br><br>

    <label>Description:</label><br>
    <textarea name="description" rows="4"></textarea>
    <br><br>

    <h4>Specifications</h4>

    <div>
        <input type="text" name="spec_key[]" placeholder="Spec Name">
        <input type="text" name="spec_value[]" placeholder="Spec Value">
    </div>

    <div>
        <input type="text" name="spec_key[]" placeholder="Spec Name">
        <input type="text" name="spec_value[]" placeholder="Spec Value">
    </div>

    <br>

    <label>Upload Images:</label>
    <input type="file" name="images" multiple required>

    <br><br>

    <button type="submit">Upload Product</button>

</form>

<script>
document.getElementById("category_select").addEventListener("change", function() {
    if (this.value === "new") {
        document.getElementById("new_category_field").style.display = "block";
    } else {
        document.getElementById("new_category_field").style.display = "none";
    }
});
</script>

</body>
</html>